# Availability Calendar WordPress Plugin

![WordPress](https://img.shields.io/badge/WordPress-6.0%2B-blue.svg)
![License](https://img.shields.io/badge/License-GPLv2-blue.svg)
![Contributions Welcome](https://img.shields.io/badge/Contributions-Welcome-brightgreen.svg)

A flexible, timezone-aware calendar plugin for WordPress that allows multiple users to mark and view their availability in a shared, collaborative schedule.

This plugin is designed for teams spread across different timezones. It uses a robust, non-DST (Daylight Saving Time) conversion logic to ensure that all times are displayed correctly for every user, regardless of their location. Access is managed via unique, admin-generated codes.

![Availability Calendar in action](screenshot.gif)
<img width="1087" height="865" alt="image" src="https://github.com/user-attachments/assets/f22f0734-c96e-4407-a2b3-7b9e77b4b598" />


---

## Key Features

*   **Access Code System:** The calendar is publicly visible but can only be edited by users who have a unique access code generated by the site admin or editor.
*   **Smart Timezone Conversion:** All times are calculated using fixed, non-DST offsets. A user in London selecting 8 AM will have their availability correctly shown as 10 AM to a user viewing the calendar from Bucharest.
*   **Overlapping (Grouped) Availability:** Multiple users can select the same time slot. The calendar will display a single event block with a consolidated list of all available users.
*   **Recurring Events:** Users can make a selection and then repeat it with a powerful set of recurrence rules:
    *   Weekly
    *   Every 2 Weeks
    *   Monthly (and every 2, 3, 4, 5, or 6 months).
*   **Event Notes with Previews:** Add detailed notes to any time slot. A short preview is visible directly on the calendar, with the full note available in a tooltip on hover.
*   **Modal-Based Editing:** Clicking any event opens a clean modal dialog to view participants, edit notes, or delete the slot.
*   **Smart Deletion:** Users can choose to delete a single instance of a recurring event or the entire series.
*   **Fully Customizable:**
    *   Change the colors of the calendar events.
    *   Set custom URLs for the "Recurring Event" and "Event Note" icons.
    *   The week can be configured to start on Monday and include weekends.
*   **Dynamic & Future-Proof:** The plugin automatically uses your server's complete timezone database, so you never need to manually add new timezones.

---

## Installation

1.  Download the plugin `.zip` file from this repository.
2.  In your WordPress dashboard, navigate to **Plugins -> Add New -> Upload Plugin**.
3.  Upload the `.zip` file and click "Activate".
4.  Place the `[availability_calendar]` shortcode on any page to display the calendar.

---

## How to Use

### For the Site Admin / Editor

1.  **Generating Access Codes:**
    *   Navigate to **Availability -> Access Codes**.
    *   Enter a "User Label" (a friendly name for the user) and click "Generate New Access Code".
    *   Give this unique code to your user. They will use it to log in.

2.  **Customizing Settings:**
    *   Navigate to **Availability -> Settings**.
    *   Here you can change the event colors and set custom URLs for the recurrence and note icons.

### For the End User

1.  **Accessing the Calendar:**
    *   Go to the page with the `[availability_calendar]` shortcode.
    *   Enter the access code you were given.

2.  **Marking Availability:**
    *   Click and drag on any empty time slot in the calendar. Your selection will be saved automatically, and your name will appear in the event block.

3.  **Creating Recurring Events:**
    *   After you make your first selection, a "Repeat Last Selection" panel will appear.
    *   Choose the start and end dates for the recurrence and a frequency (e.g., Weekly).
    *   Click "Apply Recurrence". The plugin will create copies of your initial event according to the rules you set.

4.  **Adding Notes & Deleting:**
    *   Click on any event you have created. A popup modal will appear.
    *   In the modal, you can add or edit your notes and click "Save Notes".
    *   To delete, click the "Delete" button. If it's a recurring event, a prompt will ask if you want to delete only that single instance or the entire series.

---

## Technical Details

*   **Database:** Creates two custom tables, `wp_availability_codes` and `wp_availability_slots`, to store data efficiently.
*   **Backend:** Uses the WordPress Settings API for secure settings management and `admin-ajax.php` for handling all calendar interactions.
*   **Timezone Logic:** All times are converted and stored in the database as UTC, using fixed, non-DST offsets for consistency. All conversions for display are handled on the server before being sent to the browser.
*   **Frontend:** The calendar is powered by the excellent [FullCalendar.io](https://fullcalendar.io/) library.

---

## Contributing

Contributions are welcome! Feel free to fork the repository and submit a pull request.

## License

This plugin is licensed under the GPLv2 or later.
